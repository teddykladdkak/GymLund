<!DOCTYPE html>
<html>
<head>
	<title>IKEA - Sweden</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
	<script type="text/javascript">
	var medlemmar = ['Porrhasse', 'Relsnakskir', 'Dyngkuken', 'teddykladdkaka'];
	function addZero(x,n) {while (x.toString().length < n) {x = "0" + x;};return x;};
	$(document).ready(function() {
		for (var i = medlemmar.length - 1; i >= 0; i--) {
			$.get( "http://api.bf4stats.com/api/playerInfo?plat=pc&name=" + medlemmar[i] + "&output=json", function( data ) {
				var score = [data.stats.kits.assault.score, data.stats.kits.engineer.score, data.stats.kits.support.score, data.stats.kits.recon.score];
				var scorename = ['assault', 'engineer', 'support', 'recon'];
				var highestvalue = 0;var chosenkit = '';
				for (var i = score.length - 1; i >= 0; i--) {
					if(score[i] > highestvalue){
						var highestvalue = score[i];
						var chosenkit = scorename[i];
					};
				};
				var date = new Date(data.player.dateUpdate);
				var d = addZero(date.getDate(), 2);
				var m = parseInt(addZero(date.getMonth(), 2)) + 1;
				var y = date.getFullYear();
				var kdrate = Math.floor((parseInt(data.stats.kills) / parseInt(data.stats.deaths)) * 100) / 100;
				var wlrate = Math.floor((parseInt(data.stats.numWins) / parseInt(data.stats.numLosses)) * 100) / 100;
				var hitrate = Math.floor((parseInt(data.stats.shotsHit) / parseInt(data.stats.shotsFired)) * 1000) / 10;
				var timeplayed = Math.floor((data.player.timePlayed / 60) / 60);
				console.log(data.stats.extra.roundsFinished);
				$('.result').append('<table><tr><td rowspan="6"><a href="http://bf4stats.com/pc/' + data.player.name + '" alt="Update player" target="_blank"><img src="http://bf4central.com/wp-content/uploads/2013/04/battlefield-4-' + chosenkit + '-class-render.jpg" class="avatar" alt="avatar"/><p>' + y + ' ' + m + ' ' + d + '</p></a></td><td collspan="2" class="name">' + data.player.name.toUpperCase() + '</td></tr><tr><td><table><tr><td><img src="http://eaassets-a.akamaihd.net/bl-cdn/cdnprefix/production-253-adf-b/public/profile/warsaw/gamedata/rank/mediumns/' + data.player.rank.img + '.png" width="100px"></td><td><table class="rankname"><tr><td>' + data.player.rank.name + '</td><tr></tr><td>' + chosenkit.toUpperCase() + '</td></tr></table></td></tr></table></td></tr><tr><td height="100%"><table class="statstable"><tr><td>' + timeplayed + '</td><td>Hours Played</td></tr><tr><td>' + data.stats.extra.roundsFinished + '</td><td>Rounds Played</td></tr><tr><td>' + wlrate + '</td><td>W/L Ratio</td></tr><tr><td>' + kdrate + '</td><td>K/D Rate</td></tr><tr><td>' + hitrate + '%</td><td>Accuracy</td></tr><tr><td>' + data.stats.longestHeadshot + ' m</td><td>Longest Headshot</td></tr></table></td></tr></table><div><div style="height: 20px; overflow: hidden; width: 100%;"></div><hr class="styled-hr" style="width:100%;"><div style="height: 20px; overflow: hidden; width: 100%;"></div></div>');
			});
		};
	});
	function uppdate(){
		for (var i = medlemmar.length - 1; i >= 0; i--) {
			window.open("http://bf4stats.com/pc/" + medlemmar[i]);
		};
	};
	</script>
	<style type="text/css">
		body{
			background-color: #000;
			color:#FFF;
		}
		table, td{
			border: 1px solid black;
			border-collapse: collapse;
			white-space: nowrap;
			vertical-align:middle;
		}
		.name, .rankname{
			font-weight: bold;
			font-family: verdana;
		}
		.name{
			font-size: 35px;
		}
		.rankname{
			font-size: 25px;
		}
		.statstable{
			height:100%;
			font-size: 20px;
		}
		.statstable td{
			border-color: #FFF!important;
		}
		.avatar{
			width:200px;
		}
		.wcustomhtml{
			overflow: hidden!important;
		}
		.result{
			text-align: center;
		}
	</style>
</head>
<body>
	<div class="result">
		<div style="text-align:center">
			<a href="http://battlelog.battlefield.com/bf4/platoons/view/4781260953777374539/" target="_blank">
				<img src="http://eaassets-a.akamaihd.net/battlelog/prod/emblem/100/572/320/2955059909464495572.png?v=1460830749">
			</a>
		</div>
		<div>
			<div style="height: 20px; overflow: hidden; width: 100%;"></div>
			<hr class="styled-hr" style="width:100%;">
			<div style="height: 20px; overflow: hidden; width: 100%;"></div>
		</div>
	</div>
	<a class="wsite-button wsite-button-small wsite-button-normal" onclick="uppdate();" href="#">
		<span class="wsite-button-inner">Uppdatera</span>
	</a>
</body>
</html>