<!DOCTYPE html>
<html>
<head>
	<!--

	Skapa så antingen en gymbild eller karta visas. Skulle även kunna mixa kartstilarna. Några med 3d och några vanliga och några med satelit.

	-->
	<title>GymQuiz</title>
	<script src="library/gymlund.js" type="text/javascript"></script>
	<script type="text/javascript">
		var allrandomnumbers = [];
		function Shuffle(o) {
			for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
			return o;
		};
		function loadrandomnumbers(){
			var numberofarrays = [];
			for (var i = gyms.length - 1; i >= 0; i--) {
				numberofarrays.push(i);
			};
			var valuesshuffled = Shuffle(numberofarrays);
			window['allrandomnumbers'] = valuesshuffled;
		};
		function startgame(){
			document.getElementById('startbutton').setAttribute('style', 'display: none;');
			var firstnumber = window['allrandomnumbers'][0];
			console.log(firstnumber);
			var buttonarray = [{namn: gyms[firstnumber].namn, todo: 'right'}];
			for (var i = 3 - 1; i >= 0; i--) {
				var x = Math.floor((Math.random() * gyms.length));
				buttonarray.push({namn: gyms[x].namn, todo: 'wrong'});
			}
			var buttonshuffled = Shuffle(buttonarray);
			var wrapper = document.getElementById('answers');
			while (wrapper.hasChildNodes()) {wrapper.removeChild(wrapper.firstChild);};
			for (var i = buttonshuffled.length - 1; i >= 0; i--) {
				answerbutton(buttonshuffled[i].namn, buttonshuffled[i].todo);
			}
			karta(gyms[firstnumber].location);
			window['allrandomnumbers'].shift();
		};
		function answerbutton(text, right){
			var wrapper = document.getElementById('answers');
				var span = document.createElement('span');
					span.setAttribute('class', 'button');
					span.setAttribute('onclick', 'checkanswer(this, "' + right + '")');
					var textelem = document.createTextNode(text);
					span.appendChild(textelem);
				wrapper.appendChild(span);
		};
		function checkanswer(element, todo){
			if(todo == 'wrong'){
				element.setAttribute('style', 'background-color: red;');
			}else{
				startgame();
			};
		};
		function load(){
			loadrandomnumbers();
		};
		function karta(){
			var iframe = document.getElementById('karta');
				iframe.src = 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2247.3597498544996!2d13.183088315929163!3d55.717499980543934!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNTXCsDQzJzAzLjAiTiAxM8KwMTEnMDcuMCJF!5e0!3m2!1ssv!2sus!4v1507116926264';
		};
	</script>
	<style type="text/css">
		body {
			background-image: -webkit-linear-gradient(315deg, hsla(0, 0%, 100%, .95), rgba(174, 254, 158, .99));
			background-image: linear-gradient(135deg, hsla(0, 0%, 100%, .95), rgba(174, 254, 158, .99));
		}
		.button{
			border-radius: 25px;
			background-color: lightgreen;
			padding: 7px;
			display: inline-block;
			margin: 5px;
			color: #000;
			cursor: pointer;
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
		}
		#stuffwrapper{
			text-align: center;
		}
		h2, p {
			padding-top: 0px;
			padding-bottom: 5px;
			margin-top: 0px;
			margin-bottom: 5px;
		}
		#karta {
			height: 450px;
			width: 100%;
			border: 0;
		}
	</style>
</head>
<body onload="load();">
<h2>Gym Quiz</h2>
<p>Det finns 104 Pokemon Go gym i Lund. Säker på att du vet vilka alla är?</p>
<div id="stuffwrapper">
<span class="button" onclick="startgame();" id="startbutton">Starta!</span>
<span id="answers"></span>
<iframe src="" id="karta" frameborder="0"></iframe>
</div>
</body>
</html>